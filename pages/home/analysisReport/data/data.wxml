<!--pages/home/analysisReport/data/data.wxml-->

<template name="titles">
    <view class='row title'>
        <view class='col txt-width'>{{titles[0]}}</view>
        <view class='col flex1'>{{titles[1]}}</view>
        <view class='col flex1'>{{titles[2]}}</view>
        <view class='col flex1'>{{titles[3]}}</view>
    </view>
</template>

<template name="area">
    <view class='row'>
        <view class='col txt-width txt-more'>{{name}}</view>
        <view class='col flex1'>{{enquiryCount}}</view>
        <view class='col flex1'>{{amount}}</view>
        <view class='col flex1'>{{percent}}%</view>
    </view>
</template>

<template name="product">
    <view class='row'>
        <view class='col txt-width txt-more'>{{name}}</view>
        <view class='col flex1'>{{enquiryCount}}</view>
        <view class='col flex1'>{{companyPrice}}</view>
        <view class='col flex1'>{{tradePrice}}</view>
    </view>
</template>

<template name="chart">
    <view hidden='{{tabList.length > 0 ? false : true}}'>
        <view class='canvas'>
            <view class='title canvas-title'>{{title}}</view>
            <canvas style="width: 100%; height: 640rpx;background:#fff;" canvas-id="{{canvasId}}"></canvas>
        </view>
        <view class='sjx'>
            <view class='pic'>
                <image src='{{CDN}}/icon-sjx.png'></image>
            </view>
        </view>
        <view class='enquiry'>
            <view class='enquiry-tab'>
                <template is="titles" data="{{titles}}" />
                <template wx:for="{{tabList}}" wx:key="{{item}}" is="{{tabType}}" data="{{...item}}" />
            </view>
        </view>
    </view>
</template>

<template name="noData">
    <view class="no-data">
        <image src="{{CDN}}record_no.png" class="img" />
        <text class="txt">抱歉!没有找到符合条件的记录</text>
    </view>
</template>

<view class='nav'>
    <view bindtap='setPageType' data-pageType="1" class='flex1 col active1{{pageType}}'>
        <view class='bor-right'>区域分析</view>
    </view>
    <view bindtap='setPageType' data-pageType="2" class='flex1 col active2{{pageType}}'>
        <view class='bor-right'>高频产品分析</view>
    </view>
    <picker disabled="{{disabled}}" bindchange="bindPickerChange" value="{{index}}" range="{{times}}">
        <view class='pic time'>
            <image src='{{CDN}}/icon_date.png'></image>
        </view>
    </picker>
</view>

<view>
    <view hidden="{{pageType == 2}}">
        <view wx:if="{{area1.tabList.length > 0 && area2.tabList.length > 0}}">
            <template is="chart" data="{{...area1,CDN}}" />
            <template is="chart" data="{{...area2,CDN}}" />
        </view>
        <template wx:else is="noData" data="{{CDN}}" />
    </view>
    <view hidden="{{pageType == 1}}">
        <view wx:if="{{product1.tabList.length > 0 && product1.tabList.length > 0}}">
            <template is="chart" data="{{...product1,CDN}}" />
            <template is="chart" data="{{...product2,CDN}}" />
        </view>
        <template wx:else is="noData" data="{{CDN}}" />
    </view>
</view>